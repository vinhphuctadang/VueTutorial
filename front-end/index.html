<!DOCTYPE html>
<html>
    <head>
        <script src="js/vue.js"></script>
        <script src="js/jquery.js"></script>
        <link href="css/search.css" rel="stylesheet">
    </head>
    <body>
        <div id="app">
            <div id="searchPane">
                <input name="search" type="text" :placeholder="[[ searchOptionsToString() ]]" @blur="onSearchInputFocus(false)" @focus="onSearchInputFocus(true)">
                <input type="submit" value="search">
                <div class="menu-content" v-if="searchInputFocus">
                    <p @click="selectEntity('site')">Site</p>
                    <p @click="selectEntity('page')">Page</p>
                    <p @click="selectEntity('advance')">Advance...</p>
                </div>
            </div>
            <div id="resultPane">
                <p v-if="searchResults.length>0">Search result:</p>
                <ul>
                    <li v-for="result in searchResults">
                        {{ result.id }}
                    </li> 
                </ul>
            </div>
        </div>
    </body>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                // message: 'Hello Vue! Following is list',
                searchResults: [
                    {
                        id: '1',
                        name: 'Cross Origin'
                    },
                    {
                        id: '2',
                        name: 'Requests'
                    }
                ],
                searchInputFocus: false,
                searchOptions: {
                    type: 'site'
                }
            },

            methods : {
                
                onSearchInputFocus: function(state){
                    if (state) {
                        this.searchInputFocus = state;
                    }
                    else {
                        setTimeout(()=>{
                            this.searchInputFocus = state;
                        }, 200)
                    }
                },
                selectEntity: function(entity){
                    
                    this.searchOptions.type = entity
                },
                searchOptionsToString: function(){
                    let result = ""
                    for(let key in this.searchOptions) {
                        result += `${key}:${this.searchOptions[key]} `
                    }
                    return result
                }
                // addElement: function(){
                //     this.searchResults.push({
                //         id: this.searchResults.length + 1,
                //         name: `Name of ${this.searchResults.length + 1}`,
                //     })
                // }
            }
        })

    </script>
</html>